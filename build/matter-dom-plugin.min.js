/*!
 * matter-dom-plugin 0.1.1 by Edgar Lopez-Garci 2017-07-06
 * https://github.com/elopezga/matter-dom-plugin
 * License MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("matter-js")):"function"==typeof define&&define.amd?define(["matter-js"],t):"object"==typeof exports?exports.MatterDomPlugin=t(require("matter-js")):e.MatterDomPlugin=t(e.Matter)}(this,function(e){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/libs",t(t.s=6)}([function(e,t,o){"use strict";var n={};e.exports=function(e){var t=e.Vertices,o=e.Vector,i=(e.Sleeping,e.Render,e.Common),r=e.Bounds,a=e.Axes,s=e.Body;e.Events;n=i.clone(s,!0),n.create=function(e){var t=s.create.apply(null,arguments);return t.domBounds=null,t.domVertices=null,l(t,e),t},n.setVertices=function(e,o){o[0].body===e?e.vertices=o:e.vertices=t.create(o,e),e.axes=a.fromVertices(e.vertices),e.area=t.area(e.vertices),s.setMass(e,e.density*e.area);var n=t.centre(e.vertices);t.translate(e.vertices,n,-1),s.setInertia(e,s._inertiaScale*t.inertia(e.vertices,e.mass)),t.translate(e.vertices,e.position),r.update(e.bounds,e.vertices,e.velocity),e.domVertices=u(e),e.domBounds=c(e)},n.setPosition=function(e,n){var i=o.sub(n,e.position);e.positionPrev.x+=i.x,e.positionPrev.y+=i.y;for(var a=0;a<e.parts.length;a++){var s=e.parts[a];s.position.x+=i.x,s.position.y+=i.y,t.translate(s.vertices,i),r.update(s.bounds,s.vertices,e.velocity),e.domVertices=u(e),e.domBounds=c(e)}},n.setAngle=function(e,n){var i=n-e.angle;e.anglePrev+=i;for(var s=0;s<e.parts.length;s++){var l=e.parts[s];l.angle+=i,t.rotate(l.vertices,i,e.position),a.rotate(l.axes,i),r.update(l.bounds,l.vertices,e.velocity),e.domVertices=u(e),e.domBounds=c(e),s>0&&o.rotateAbout(l.position,i,e.position,l.position)}},n.scale=function(e,o,n,i){for(var l=0;l<e.parts.length;l++){var d=e.parts[l];t.scale(d.vertices,o,n,e.position),d.axes=a.fromVertices(d.vertices),e.isStatic||(d.area=t.area(d.vertices),s.setMass(d,e.density*d.area),t.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),s.setInertia(d,t.inertia(d.vertices,d.mass)),t.translate(d.vertices,{x:d.position.x,y:d.position.y})),r.update(d.bounds,d.vertices,e.velocity),e.domVertices=u(e),e.domBounds=c(e)}if(e.circleRadius&&(o===n?e.circleRadius*=o:e.circleRadius=null),!e.isStatic){var p=_totalProperties(e);e.area=p.area,s.setMass(e,p.mass),s.setInertia(e,p.inertia)}},n.update=function(e,n,i,s){var l=Math.pow(n*i*e.timeScale,2),d=1-e.frictionAir*i*e.timeScale,p=e.position.x-e.positionPrev.x,m=e.position.y-e.positionPrev.y;e.velocity.x=p*d*s+e.force.x/e.mass*l,e.velocity.y=m*d*s+e.force.y/e.mass*l,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*d*s+e.torque/e.inertia*l,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=o.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var f=0;f<e.parts.length;f++){var y=e.parts[f];t.translate(y.vertices,e.velocity),f>0&&(y.position.x+=e.velocity.x,y.position.y+=e.velocity.y),0!==e.angularVelocity&&(t.rotate(y.vertices,e.angularVelocity,e.position),a.rotate(y.axes,e.angularVelocity),f>0&&o.rotateAbout(y.position,e.angularVelocity,e.position,y.position)),r.update(y.bounds,y.vertices,e.velocity),e.domVertices=u(e),e.domBounds=c(e)}};var l=function(e,t){e.domVertices=u(e),e.domBounds=c(e)},u=function(e){var n=[],i=e.domRenderer;return e.vertices.forEach(function(e){var t=i.mapping.worldToView({x:e.x,y:e.y}),r=o.create(t.x,t.y);n.push(r)}),t.create(n,e)},c=function(e){return r.create(e.domVertices)};return n}},function(e,t,o){"use strict";var n={};e.exports=function(e){var t=(e.Vertices,e.Sleeping),o=e.Mouse,i=e.Events,r=(e.Detector,e.Constraint),a=e.Composite,s=e.Common,l=e.Bounds;n.create=function(e,t){var l=(e?e.mouse:null)||(t?t.mouse:null);l||(e&&e.render&&e.render.canvas?l=o.create(e.render.canvas):t&&t.element?l=o.create(t.element):(l=o.create(),s.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var c=r.create({label:"Mouse Constraint",pointA:l.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),d={type:"mouseConstraint",mouse:l,element:null,body:null,constraint:c,collisionFilter:{category:1,mask:4294967295,group:0}},p=s.extend(d,t);return i.on(e,"beforeUpdate",function(){var t=a.allBodies(e.world);n.update(p,t),u(p)}),p},n.update=function(e,o){var n,r=e.mouse,a=e.constraint,s=e.body;if(0===r.button)if(a.bodyB)t.set(a.bodyB,!1),n=s.domRenderer.mapping.viewToWorld(r.position),a.pointA=n;else for(var u=(document.querySelectorAll("[matter]"),0);u<o.length;u++){s=o[u],n=s.domRenderer.mapping.viewToWorld(r.position);s.domRenderer.mapping.worldToView(s.position);if(l.contains(s.bounds,n)){a.pointA=n,a.bodyB=e.body=s,a.pointB={x:0,y:0},a.angleB=s.angle;break}}else a.bodyB=e.body=null,a.pointB=null,s&&i.trigger(e,"enddrag",{mouse:r,body:s})};var u=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&i.trigger(e,"mousemove",{mouse:t}),n.mousedown&&i.trigger(e,"mousedown",{mouse:t}),n.mouseup&&i.trigger(e,"mouseup",{mouse:t}),o.clearSourceEvents(t)};return n}},function(e,t,o){"use strict";e.exports=function(e){var t=(e.World,e.Sleeping,e.Resolver,e.Render,e.Pair,e.Metrics,e.Grid,e.Events,e.Composite),o=(e.Constraint,e.Common,e.Body,e.DomBody),n=e.Engine,i=n.update;n.update=function(e,o,n){i(e,o,n),o=o||1e3/60,n=n||1;var a=e.world,s=e.timing,l=t.allBodies(a);return r(l,o,s.timeScale,n,a.bounds),e};var r=function(e,t,n,i,r){for(var a=0;a<e.length;a++){var s=e[a];s.isStatic||s.isSleeping||o.update(s,t,n,i)}}}},function(e,t,o){"use strict";var n={};e.exports=function(e){var t=(e.Body,e.DomBody),o=e.Vertices,i=e.Common,r=e.World;e.Bounds,e.Vector;return n.create=function(e){var t=e.bodyType,o=e.el,i=e.render,a=e.position;delete e.bodyType,delete e.render,delete e.position,e.domRenderer=i;var s=null,l=document.querySelector(o),u=i.mapping.viewToWorld({x:a.x,y:a.y});if("block"==t){var c=i.mapping.viewToWorld({x:l.offsetWidth,y:l.offsetHeight});s=n.block(u.x,u.y,c.x,c.y,e)}else if("circle"==t){var d=i.mapping.viewToWorld(l.offsetWidth/2);s=n.circle(u.x,u.y,d,e)}return s&&(l.setAttribute("matter-id",s.id),r.add(i.engine.world,[s])),s},n.block=function(e,n,r,a,s){var s=s||{},l={label:"Block Body",position:{x:e,y:n},vertices:o.fromPath("L 0 0 L "+r+" 0 L "+r+" "+a+" L 0 "+a)};if(s.chamfer){var u=option.chamfer;l.vertices=o.chamfer(l.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete s.chamfer}return t.create(i.extend({},l,s))},n.circle=function(e,t,o,r,a){r=r||{};var s={label:"Circle Body",circleRadius:o};a=a||25;var l=Math.ceil(Math.max(10,Math.min(a,o)));return l%2==1&&(l+=1),n.polygon(e,t,l,o,i.extend({},s,r))},n.polygon=function(e,n,r,a,s){if(s=s||{},r<3)return Bodies.circle(e,n,a,s);for(var l=2*Math.PI/r,u="",c=.5*l,d=0;d<r;d+=1){var p=c+d*l,m=Math.cos(p)*a,f=Math.sin(p)*a;u+="L "+m.toFixed(3)+" "+f.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:e,y:n},vertices:o.fromPath(u)};if(s.chamfer){var g=s.chamfer;y.vertices=o.chamfer(y.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete s.chamfer}return t.create(i.extend({},y,s))},n}},function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={};e.exports=function(e){var t,o,r=e.Common,a=e.Composite,s=e.Events,l=e.Render;return"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(r.now())},1e3/60)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i.create=function(e){var t={engine:null,element:window,controller:i,frameRequestId:null,options:{}},o=e.engine,a=r.extend(t,e);a.mapping={},a.mapping.ratioMultiplier=1/6,a.mapping.VIEW={width:window.innerWidth,height:window.innerHeight},a.mapping.VIEW.center={x:a.mapping.VIEW.width/2,y:a.mapping.VIEW.height/2},a.mapping.WORLD={width:a.mapping.VIEW.width*a.mapping.ratioMultiplier,height:a.mapping.VIEW.height*a.mapping.ratioMultiplier},a.mapping.WORLD.center={x:a.mapping.WORLD.width/2,y:a.mapping.WORLD.height/2},a.mapping.viewToWorld=function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e?{x:a.mapping.ratioMultiplier*e.x,y:a.mapping.ratioMultiplier*e.y}:a.mapping.ratioMultiplier*e},a.mapping.worldToView=function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e?{x:e.x/a.mapping.ratioMultiplier,y:e.y/a.mapping.ratioMultiplier}:e/a.mapping.ratioMultiplier},document.querySelector("#debug").style.position="absolute";var s=l.create({element:document.querySelector("#debug"),engine:o,options:{width:a.mapping.WORLD.width,height:a.mapping.WORLD.height,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}});return l.run(s),a.DebugRender=s,a},i.run=function(e){!function o(n){e.frameRequestId=t(o),i.world(e)}()},i.stop=function(e){o(e.frameRequestId)},i.world=function(e){var t=e.engine,o=t.world,n=(a.allBodies(o),a.allConstraints(o),document.querySelectorAll("[matter]")),r={timestamp:t.timing.timestamp};s.trigger(e,"beforeRender",r),i.bodies(e,n)},i.bodies=function(e,t,o){for(var n,i=e.engine,r=i.world,s=(e.options,a.allBodies(r)),l=0;l<t.length;l++){n=t[l];for(var u=null,c=0;c<s.length;c++)if(n.hasAttribute("matter-id")&&s[c].id==n.getAttribute("matter-id")){u=s[c];break}if(u){var d=e.mapping.worldToView({x:u.position.x,y:u.position.y}),p={x:n.offsetWidth/2,y:n.offsetHeight/2};n.style.position="absolute",n.style.transform="translate("+(d.x-p.x)+"px, "+(d.y-p.y)+"px)",n.style.transform+="rotate("+u.angle+"rad)"}}},i}},function(t,o){t.exports=e},function(e,t,o){"use strict";var n=o(5),i=o(4),r=o(0),a=o(3),s=o(1),l=o(2),u={name:"matter-dom-plugin",version:"0.1.1",for:"matter-js@^0.12.0",install:function(e){u.installRenderDom(e),u.installDomBody(e),u.installDomBodies(e),u.installDomMouseConstraint(e),u.installEngine(e)},installRenderDom:function(e){console.log("Installing RenderDom module."),e.RenderDom=i(e)},installDomBodies:function(e){console.log("Installing DomBodies module."),e.DomBodies=a(e)},installDomMouseConstraint:function(e){console.log("Installing DomMouseConstraint."),e.DomMouseConstraint=s(e)},installDomBody:function(e){console.log("Installing DomBody updates."),e.DomBody=r(e)},installEngine:function(e){console.log("Patching Engine."),l(e)}};n.Plugin.register(u),e.exports.MatterDomPlugin=u}])});